// === GitHub /HizliOkuma/metinler klasÃ¶rÃ¼nden .txt dosyalarÄ±nÄ± listele ===
async function populateReadyTexts(){
  const select = document.getElementById("readyTextSelect");
  if(!select) return;

  // Ã¶nce temizle
  select.innerHTML = '<option value="">SeÃ§iniz</option>';

  // ğŸ”´ Ã–nemli: Repo adÄ± "ilhantopaloglu.github.io"
  // KlasÃ¶r yolu: HizliOkuma/metinler
  const apiUrl = "https://api.github.com/repos/ilhantopaloglu/ilhantopaloglu.github.io/contents/HizliOkuma/metinler";

  try{
    const res = await fetch(apiUrl);

    if(!res.ok){
      console.error("GitHub API hatasÄ±:", res.status, res.statusText);
      if (typeof generateStatus !== "undefined") {
        generateStatus.textContent = "HazÄ±r metin listesi alÄ±namadÄ± (" + res.status + ").";
        generateStatus.style.color = "red";
      }
      return;
    }

    const data = await res.json();

    const txtFiles = (data || [])
      .filter(item => item.type === "file" && item.name.toLowerCase().endsWith(".txt"));

    if(!txtFiles.length){
      if (typeof generateStatus !== "undefined") {
        generateStatus.textContent = "metinler klasÃ¶rÃ¼nde .txt dosyasÄ± bulunamadÄ±.";
        generateStatus.style.color = "red";
      }
      return;
    }

    // Ä°simleri alfabetik sÄ±rala
    txtFiles
      .sort((a,b) => a.name.localeCompare(b.name, "tr"))
      .forEach(item => {
        const opt = document.createElement("option");
        opt.value = "https://ilhantopaloglu.github.io/HizliOkuma/metinler/" + item.name;
        opt.textContent = item.name.replace(/\.txt$/i,"");
        select.appendChild(opt);
      });

    if (typeof generateStatus !== "undefined") {
      generateStatus.textContent = "HazÄ±r metin listesi yÃ¼klendi.";
      generateStatus.style.color = "green";
    }

  }catch(err){
    console.error("HazÄ±r metin listesi alÄ±namadÄ±:", err);
    if (typeof generateStatus !== "undefined") {
      generateStatus.textContent = "HazÄ±r metin listesi alÄ±namadÄ± (baÄŸlantÄ± hatasÄ±).";
      generateStatus.style.color = "red";
    }
  }
}
